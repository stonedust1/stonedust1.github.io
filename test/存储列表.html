<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Storage Manager</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
        th, td {
            padding: 5px;
        }
    </style>
</head>

<body>
    <label for="key">Key:</label>
    <input type="text" id="key" placeholder="Enter key">
    <label for="value">Value:</label>
    <input type="text" id="value" placeholder="Enter value">
    <button onclick="addData()">Add</button>
    <button onclick="clearStorage()">Clear</button>
    <table id="data-table">
        <thead>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <p>这里有 <span id="items">0</span> items</p>

    <script>

                /*
    分别创建两个input元素用来指定storage的Key与Value
    Key与Value都不能为空，或连续的空格
    每次添加数据，右边的tabel都会更新动态显式当前所有的 key 与其对应的 value 值
    页面存在一个用来展示当前storage中存储了多少条键值对的count组件
    */
        function addData() {
            var key = document.getElementById('key').value.trim();
            var value = document.getElementById('value').value.trim();
            if (key && value) {
                localStorage.setItem(key, value);
                updateTable();
            } else {
                alert('Key and Value cannot be empty or just spaces.');
            }
        }

        function clearStorage() {
            localStorage.clear();
            updateTable();
        }

        function updateTable() {
            var tableBody = document.getElementById('data-table').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ''; // Clear the table body
            var items = 0;
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                var value = localStorage.getItem(key);
                var row = tableBody.insertRow();
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                cell1.innerHTML = key;
                cell2.innerHTML = value;
                items++;
            }
            document.getElementById('items').textContent = items;
        }

        // Initialize the table on page load
        window.onload = updateTable;
    </script>
</body>

</html>